{% from "_grid_macros.html" import grid_headers, grid_cells, grid_pagination %}
{% set s = sort|default('-date', true) %}
{% if rows %}
<table class="comm-table">
  <thead>
    <tr>
      <th class="comm-check-col"><input type="checkbox" id="select-all"></th>
      {{ grid_headers(view, entity_def, s, "/communications/search",
                       {"q": q|default('', true), "channel": channel|default('', true), "direction": direction|default('', true)}) }}
    </tr>
  </thead>
  <tbody>
    {% for row in rows %}
    <tr>
      <td class="comm-check-col"><input type="checkbox" class="comm-check" value="{{ row.id }}"></td>
      {{ grid_cells(row, view, entity_def, 'communication') }}
    </tr>
    {% endfor %}
  </tbody>
</table>
{{ grid_pagination(page, total_pages, "/communications",
                    {"q": q|default('', true), "sort": s, "channel": channel|default('', true), "direction": direction|default('', true)}) }}
{% else %}
<p class="empty-state">No communications found.</p>
{% endif %}
