{% from "_grid_macros.html" import grid_headers, grid_cells, grid_pagination %}
{% set s = sort|default('name', true) %}
{% set sc = scope|default('all', true) %}
{% if rows %}
<table>
  <thead>
    <tr>
      <th style="width:2rem;"><input type="checkbox" id="select-all"></th>
      {{ grid_headers(view, entity_def, s, "/contacts/search", {"q": q|default('', true), "scope": sc}) }}
    </tr>
  </thead>
  <tbody>
    {% for row in rows %}
    <tr>
      <td><input type="checkbox" class="contact-check" value="{{ row.id }}"></td>
      {{ grid_cells(row, view, entity_def) }}
    </tr>
    {% endfor %}
  </tbody>
</table>
{{ grid_pagination(page, total_pages, "/contacts", {"q": q|default('', true), "sort": s, "scope": sc}) }}
{% else %}
<p class="empty-state">No contacts found.</p>
{% endif %}
