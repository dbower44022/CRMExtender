{% from "_grid_macros.html" import grid_headers, grid_cells, grid_pagination %}
{% set s = sort|default('', true) %}
{% if rows %}
<table class="conv-table">
  <thead>
    <tr>
      {{ grid_headers(view, entity_def, s, "/conversations/search",
                       {"q": q|default('', true), "status": status|default('open', true), "topic_id": topic_id|default('', true)}) }}
    </tr>
  </thead>
  <tbody>
    {% for row in rows %}
    <tr>
      {{ grid_cells(row, view, entity_def) }}
    </tr>
    {% endfor %}
  </tbody>
</table>
{{ grid_pagination(page, total_pages, "/conversations",
                    {"q": q|default('', true), "sort": s, "status": status|default('open', true), "topic_id": topic_id|default('', true)}) }}
{% else %}
<p class="empty-state">No conversations found.</p>
{% endif %}
